// Javaのビルドスクリプト

// プラグイン指定
// Javaをコンパイルするのに必要
apply plugin: 'java'

// フォルダーをEclipseプロジェクト化するのに必要
apply plugin: 'eclipse'

// WARを生成するのに必要
apply plugin: 'war'

// リポジトリーとしてMavenリポジトリーを指定
repositories {
    mavenCentral()
}

// 依存関係を記述する
dependencies {
    // providedCompile: コンパイル依存だがWARに含めない
    // サーブレットを作成するのに最低限必要なJARを追加
    providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
}

// WAR名を指定する
war {
    archiveName = 'myapp.war'
}

// ビルド時にバージョンを書き換える
task versionProp {
    doLast {
        ant.propertyfile(file: './src/main/resources/version.properties') {
            entry key: 'version', value: new Date().format('yyyy-MM-dd HH:mm:ss')
        }
    }
}
